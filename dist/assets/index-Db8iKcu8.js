(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const I="https://webback-production-2d27.up.railway.app",T="+639511497898",p=`${I}/api`;console.log("✅ Environment loaded:");console.log("API_BASE:",I);console.log("LOGIN_URL:",p);console.log("WHATSAPP_NUMBER:",T);function w(){const e=`https://wa.me/${T}?text=${encodeURIComponent("Hello MR ROBOT , I need panel.")}`;o("Opening WhatsApp contact...","info"),window.open(e,"_blank");const n=document.getElementById("message");n.textContent="Opening WhatsApp...",n.className="message success show",setTimeout(()=>{n.classList.remove("show")},3e3)}let l,u,a,d,f,g;document.addEventListener("DOMContentLoaded",function(){console.log("✅ DOM Loaded, LOGIN_URL:",p),C(),S(),A(),L()});function L(){const s=localStorage.getItem("mr_robot_token"),e=localStorage.getItem("mr_robot_session_id");s&&e&&(o("Existing session detected","info"),o("Token found in localStorage","info"),setTimeout(()=>{o("Press VERIFY IDENTITY to continue","info")},1e3))}function C(){const s=document.getElementById("particles"),e=window.innerWidth<768?40:60;for(let n=0;n<e;n++){const i=document.createElement("div");i.className="particle",i.style.left=Math.random()*100+"%";const t=Math.random()*2+1;i.style.width=t+"px",i.style.height=t+"px";const r=2+Math.random()*5,c=Math.random()*5;i.style.animationDuration=r+"s",i.style.animationDelay=c+"s",i.style.opacity=Math.random()*.5+.1,s.appendChild(i)}}function S(){l=document.getElementById("passInput"),u=document.getElementById("eyeToggle"),a=document.getElementById("loginBtn"),d=document.getElementById("message"),f=document.getElementById("terminalContent"),g=document.getElementById("statusLine"),u.onclick=function(){const s=l.type==="password";l.type=s?"text":"password",u.classList.toggle("fa-eye"),u.classList.toggle("fa-eye-slash")},a.addEventListener("click",y),l.addEventListener("keyup",function(s){s.key==="Enter"&&y()})}function A(){setTimeout(()=>{o("Secure terminal initialized","success")},500),setTimeout(()=>{o("All connections are encrypted with AES-256","info")},1200),setTimeout(()=>{o("Firewall status: ACTIVE","info")},1800),setTimeout(()=>{o("Ready for authentication","success"),g.textContent="Ready for authentication"},2400)}function o(s,e="info"){const n=document.createElement("div");n.className="terminal-line";const i=document.createElement("span");i.className="prompt",i.textContent="$";const t=document.createElement("span");t.textContent=" "+s,e==="error"?t.style.color="var(--danger-red)":e==="success"?t.style.color="var(--terminal-green)":e==="warning"&&(t.style.color="var(--warning-yellow)"),n.appendChild(i),n.appendChild(t),f.appendChild(n),f.scrollTop=f.scrollHeight,g.textContent=s}function m(s,e){d.textContent=s,d.className=`message ${e} show`,e==="success"&&setTimeout(()=>{d.classList.remove("show")},5e3)}async function y(){const s=l.value.trim();if(d.className="message",!s){m("ACCESS DENIED: No credentials provided","error"),o("Authentication failed: Empty credentials","error");const e=document.querySelector(".container");e.style.animation="none",setTimeout(()=>{e.style.animation="fadeIn 0.5s ease-out"},10);return}a.innerHTML='<i class="fas fa-spinner fa-spin"></i> AUTHENTICATING...',a.disabled=!0,o("Attempting authentication...","info"),o("Connecting to secure server...","info");try{const n=await(await fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:s})})).json();n.success?(o("Credentials verified successfully","success"),o("Token received: "+n.token.substring(0,20)+"...","info"),o("Session ID: "+n.sessionId,"info"),o("Storing credentials securely...","info"),localStorage.setItem("mr_robot_token",n.token),localStorage.setItem("mr_robot_session_id",n.sessionId),localStorage.setItem("mr_robot_userId","ADMIN"),localStorage.setItem("mr_robot_active_sessions",JSON.stringify(n.activeSessions||[])),o("Credentials stored in secure storage","success"),o("Redirecting to control panel...","success"),m("ACCESS GRANTED: Redirecting to control panel...","success"),a.innerHTML='<i class="fas fa-check"></i> ACCESS GRANTED',a.style.background="linear-gradient(135deg, rgba(39, 208, 125, 0.95), rgba(0, 210, 211, 0.95))",a.style.borderColor="var(--success-green)",setTimeout(()=>{window.location.href="devices.html"},2e3)):(o("Authentication failed: "+(n.message||"Invalid credentials"),"error"),m("ACCESS DENIED: "+(n.message||"Invalid credentials"),"error"),h())}catch(e){console.error("Login error:",e),o("Connection error: Unable to reach auth server","error"),o("Error details: "+e.message,"error"),m("NETWORK ERROR: Could not establish secure connection","error"),h()}}function h(){setTimeout(()=>{a.innerHTML='<i class="fas fa-user-secret"></i> VERIFY IDENTITY',a.disabled=!1,a.style.background="",a.style.borderColor=""},1500)}let E;window.addEventListener("resize",function(){clearTimeout(E),E=setTimeout(function(){document.querySelectorAll(".particle").forEach(e=>e.remove()),C()},250)});window.openWhatsApp=w;
